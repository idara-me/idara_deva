{
  "version": 3,
  "sources": ["../../../../../apps/idara_deva/idara_deva/public/js/auto_add_row_shortcut.js", "../../../../../apps/idara_deva/idara_deva/public/js/add_form_paggination.js", "../../../../../apps/idara_deva/idara_deva/public/js/remove_confirmation_on_submit.js", "../../../../../apps/idara_deva/idara_deva/public/js/simplified_item_variants_selection.js"],
  "sourcesContent": ["(function() {\n\t$(document).keydown(function(e) {\n\t\tif (e.ctrlKey && e.keyCode == 13) {\n\t\t\t$(document.activeElement).parents(\"[data-fieldtype=Table]\").find(\".grid-add-row\").click();\n\t\t}\n\t});\n})();\n", "\n(function() {\n\tconst get_cur_doc_index = () => {\n\t\tconst dt = cur_frm.doc.doctype\n\t\tlet filters, sort_field, sort_order;\n\t\tlet list_view = frappe.get_list_view(dt);\n\n\t\tif (list_view) {\n\t\t\tfilters = list_view.get_filters_for_args();\n\t\t\tsort_field = list_view.sort_by;\n\t\t\tsort_order = list_view.sort_order;\n\t\t} else {\n\t\t\tlet list_settings = frappe.get_user_settings(dt)[\"List\"];\n\t\t\tif (list_settings) {\n\t\t\tfilters = list_settings.filters;\n\t\t\tsort_field = list_settings.sort_by;\n\t\t\tsort_order = list_settings.sort_order;\n\t\t\t}\n\t\t}\n\n\t\tlet args = {\n\t\t\tdoctype: cur_frm.doc.doctype,\n\t\t\tdocname: cur_frm.doc.name,\n\t\t\tfilters,\n\t\t\tsort_order,\n\t\t\tsort_field,\n\t\t};\n\n\t\tfrappe.call(\"idara_deva.events.item.get_cur_doc_index\", args).then((r) => {\n\t\t\tif (r.message) {\n\t\t\tconst button = $(`\n\t\t\t\t<button class=\"text-muted btn btn-default pagination-btn icon-btn\">\n\t\t\t\t${r.message}\n\t\t\t\t</button>\n\t\t\t`);\n\t\t\t\n\t\t\t$(\".pagination-btn\").remove()\n\t\t\t$(`#page-${dt}`).find(\".standard-actions\").prepend(button);\n\t\t\t}\n\t\t});\n\t};\n\n\tfrappe.router.on(\"change\", function() {\n\t\tvar route = frappe.get_route();\n\t\tif (route[0] === \"Form\") {\n\t\t\tlet get_page_number_interval= setInterval(() => {\n\t\t\t\tif ($(\".page-icon-group:visible\").length) {\n\t\t\t\t\tget_cur_doc_index();\n\t\t\t\t\tclearInterval(get_page_number_interval);\n\t\t\t\t}\n\t\t\t}, 500);\n\t\t}\n\t});\n})();", "const doctypes = [\n  \"Sales Order\",\n  \"Delivery Note\",\n  \"Purchase Order\",\n  \"Purchase Receipt\",\n];\n\nfor (const doctype of doctypes) {\n  frappe.ui.form.on(doctype, {\n    onload: function (frm) {\n      frm.savesubmit = function (btn, callback, on_error) {\n        var me = this;\n\n        return new Promise((resolve) => {\n          me.script_manager.trigger(\"before_submit\").then(function () {\n            frappe.validated = true;\n\n            me.save(\n              \"Submit\",\n              function (r) {\n                if (r.exc) {\n                  me.handle_save_fail(btn, on_error);\n                } else {\n                  frappe.utils.play_sound(\"submit\");\n                  callback && callback();\n                  me.script_manager\n                    .trigger(\"on_submit\")\n                    .then(() => resolve(me))\n                    .then(() => {\n                      if (frappe.route_hooks.after_submit) {\n                        let route_callback = frappe.route_hooks.after_submit;\n                        delete frappe.route_hooks.after_submit;\n                        route_callback(me);\n                      }\n                    });\n                }\n              },\n              btn,\n              () => me.handle_save_fail(btn, on_error),\n              resolve\n            );\n          });\n        });\n      };\n    },\n  });\n}\n", "const doctypes = [\n  \"Sales Order\",\n  \"Sales Invoice\",\n  \"Purchase Order\",\n  \"Purchase Invoice\",\n];\n\nfor (const doctype of doctypes) {\n  frappe.ui.form.on(doctype, {\n    custom_item_template: function (frm) {\n      const dt = frm.doctype;\n\n      if ([\"Sales Order\", \"Sales Invoice\"].includes(dt) && !frm.doc.customer) {\n        frappe.throw(\"Please select Customer first!\");\n      }\n\n      if (\n        [\"Purchase Order\", \"Purchase Invoice\"].includes(dt) &&\n        !frm.doc.supplier\n      ) {\n        frappe.throw(\"Please select Supplier first!\");\n      }\n\n      frappe.prompt(\n        [\n          {\n            label: \"Item Template\",\n            fieldname: \"item_template\",\n            fieldtype: \"Link\",\n            options: \"Item\",\n            get_query: function () {\n              return {\n                filters: {\n                  has_variants: 1,\n                },\n              };\n            },\n          },\n        ],\n        function (values) {\n          let template_item = values.item_template;\n\n          if (!template_item) {\n            frappe.throw(\"Please select Item Template first!\");\n          }\n\n          let query_args = {\n            query: \"idara_deva.events.item_variants.get_variants\",\n            filters: { variant_of: template_item },\n          };\n\n          let add_items = new frappe.ui.form.MultiSelectDialog({\n            doctype: \"Item\",\n            target: frm,\n            setters: {},\n            add_filters_group: 1,\n            date_field: \"\",\n            columns: [\"name\", \"qty\"],\n            get_query: function () {\n              return query_args;\n            },\n            action: function (selections) {\n              for (let row of selections) {\n                let child = frm.add_child(\"items\");\n                const cdt = child.doctype;\n                const cdn = child.name;\n\n                let qty = $(add_items.$parent[0])\n                  .find(`[data-variant_item_name=\"${row}\"]`)\n                  .val();\n                frappe.model.set_value(cdt, cdn, \"item_code\", row);\n                frappe.model.set_value(cdt, cdn, \"qty\", qty);\n                frm.refresh_field(\"items\");\n              }\n\n              $(add_items.$parent[0]).parents(\".modal\").click();\n            },\n          });\n        }\n      );\n    },\n  });\n}\n"],
  "mappings": "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",
  "names": ["e", "get_cur_doc_index", "dt", "filters", "sort_field", "sort_order", "list_view", "list_settings", "args", "r", "button", "route", "get_page_number_interval", "doctypes", "doctype", "frm", "btn", "callback", "on_error", "me", "resolve", "r", "route_callback", "doctypes", "doctype", "frm", "dt", "values", "template_item", "query_args", "add_items", "selections", "row", "child", "cdt", "cdn", "qty"]
}
